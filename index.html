<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ladue, MO Weather Dashboard</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .weather-section {
            background: #0f3460;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid #1a5490;
            margin-bottom: 20px;
        }

        .current-weather-bar {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 30px;
            padding: 20px;
            background: #16213e;
            border-radius: 15px;
            border: 1px solid #1a5490;
        }

        .current-icon {
            font-size: 5em;
        }

        .current-details {
            text-align: left;
        }

        .current-weather {
            text-align: center;
        }

        .current-temp {
            font-size: 3em;
            color: #e94560;
            font-weight: bold;
            line-height: 1;
        }

        .current-condition {
            font-size: 1.3em;
            color: #a8b2d1;
            margin-top: 5px;
        }

        .current-updated {
            color: #a8b2d1;
            font-size: 0.9em;
            margin-top: 10px;
        }

        .section-title {
            color: #e94560;
            font-size: 1.5em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #1a5490;
        }

        .timeline-labels {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding: 0 20px;
        }

        .timeline-label {
            color: #a8b2d1;
            font-size: 0.9em;
            font-weight: 600;
        }

        .timeline-label.today {
            color: #e94560;
            font-size: 1em;
        }

        .chart-container-wide {
            display: flex;
            flex-direction: column;
            gap: 0;
            padding: 20px;
            background: #16213e;
            border-radius: 15px;
            border: 1px solid #1a5490;
            overflow-x: auto;
        }

        .line-chart {
            width: 100%;
            height: 300px;
            margin-bottom: 10px;
        }

        .data-point {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .data-point:hover {
            r: 7;
            filter: brightness(1.5);
        }

        .current-point {
            filter: drop-shadow(0 0 8px #e94560);
        }

        .pulse-ring {
            animation: pulse-ring 2s infinite;
        }

        @keyframes pulse-ring {
            0%, 100% { 
                r: 12; 
                opacity: 0.3; 
            }
            50% { 
                r: 16; 
                opacity: 0; 
            }
        }

        .chart-labels {
            display: flex;
            justify-content: space-between;
            gap: 5px;
            padding: 0 10px;
        }

        .day-label {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            min-width: 50px;
        }

        .label-temp {
            color: #00d9ff;
            font-weight: bold;
            font-size: 0.85em;
            margin-bottom: 5px;
        }

        .label-day {
            color: #a8b2d1;
            font-size: 0.75em;
            line-height: 1.3;
            margin-bottom: 5px;
        }

        .label-icon {
            color: #00d9ff;
            font-size: 0.7em;
        }

        .past-label .label-temp,
        .past-label .label-icon {
            color: #a8b2d1;
            opacity: 0.7;
        }

        .current-label .label-temp {
            color: #e94560;
            font-size: 1em;
        }

        .current-label .label-day {
            color: #e94560;
            font-weight: bold;
            font-size: 0.8em;
        }

        .current-label .label-icon {
            color: #e94560;
            font-weight: bold;
        }

        .chart-container {
            display: grid;
            gap: 15px;
        }

        .day-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #16213e;
            border-radius: 10px;
            transition: transform 0.2s, background 0.2s;
            border: 1px solid #1a5490;
        }

        .day-item:hover {
            transform: translateX(5px);
            background: #1a5490;
        }

        .day-name {
            font-weight: bold;
            color: #e94560;
            min-width: 100px;
        }

        .day-date {
            color: #a8b2d1;
            font-size: 0.9em;
        }

        .day-temp {
            font-size: 1.3em;
            color: #00d9ff;
            font-weight: bold;
        }

        .day-rain {
            color: #00d9ff;
            font-size: 0.9em;
        }

        .map-container {
            background: #16213e;
            padding: 20px;
            border-radius: 15px;
            border: 1px solid #1a5490;
        }

        #weatherMap {
            width: 100%;
            height: 100%;
            border: 0;
            border-radius: 10px;
        }

        .weather-icon {
            font-size: 3em;
            margin: 20px 0;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab-button {
            background: #0f3460;
            color: #e94560;
            border: 2px solid #e94560;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .tab-button.active {
            background: linear-gradient(135deg, #e94560 0%, #d63447 100%);
            color: white;
            border-color: transparent;
        }

        .tab-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(233, 69, 96, 0.4);
            background: #1a5490;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .current-temp {
                font-size: 3em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 15-Day Weather Timeline -->
        <div class="weather-section">
            <div class="section-title">üå§Ô∏è Ladue, MO - 15-Day Weather Timeline for CK</div>
            <div class="timeline-labels">
                <span class="timeline-label past">‚Üê Past 7 Days</span>
                <span class="timeline-label today">Today</span>
                <span class="timeline-label future">Next 7 Days ‚Üí</span>
            </div>
            <div class="chart-container-wide">
                <svg class="line-chart" viewBox="0 0 1000 300" preserveAspectRatio="none">
                    <!-- Grid lines -->
                    <line x1="0" y1="75" x2="1000" y2="75" stroke="#1a5490" stroke-width="1" opacity="0.3"/>
                    <line x1="0" y1="150" x2="1000" y2="150" stroke="#1a5490" stroke-width="1" opacity="0.3"/>
                    <line x1="0" y1="225" x2="1000" y2="225" stroke="#1a5490" stroke-width="1" opacity="0.3"/>
                    
                    <!-- Area fill under the line -->
                    <path d="M 33 144 L 100 156 L 167 165 L 234 171 L 301 159 L 368 150 L 435 162 L 500 159 L 567 132 L 634 105 L 701 111 L 768 93 L 835 99 L 902 117 L 967 126 L 967 300 L 33 300 Z" 
                          fill="url(#gradient)" opacity="0.3"/>
                    
                    <!-- Temperature line -->
                    <path d="M 33 144 L 100 156 L 167 165 L 234 171 L 301 159 L 368 150 L 435 162 L 500 159 L 567 132 L 634 105 L 701 111 L 768 93 L 835 99 L 902 117 L 967 126" 
                          stroke="url(#lineGradient)" 
                          stroke-width="3" 
                          fill="none"
                          stroke-linecap="round"
                          stroke-linejoin="round"/>
                    
                    <!-- Data points -->
                    <circle cx="33" cy="144" r="5" fill="#4a5568" class="data-point past-point"/>
                    <circle cx="100" cy="156" r="5" fill="#4a90e2" class="data-point past-point"/>
                    <circle cx="167" cy="165" r="5" fill="#4a90e2" class="data-point past-point"/>
                    <circle cx="234" cy="171" r="5" fill="#4a5568" class="data-point past-point"/>
                    <circle cx="301" cy="159" r="5" fill="#6b7280" class="data-point past-point"/>
                    <circle cx="368" cy="150" r="5" fill="#00d9ff" class="data-point past-point"/>
                    <circle cx="435" cy="162" r="5" fill="#4a5568" class="data-point past-point"/>
                    
                    <!-- Current day point (highlighted) -->
                    <circle cx="500" cy="159" r="8" fill="#e94560" class="data-point current-point"/>
                    <circle cx="500" cy="159" r="12" fill="#e94560" opacity="0.3" class="pulse-ring"/>
                    
                    <!-- Future points -->
                    <circle cx="567" cy="132" r="5" fill="#00d9ff" class="data-point future-point"/>
                    <circle cx="634" cy="105" r="5" fill="#ffd700" class="data-point future-point"/>
                    <circle cx="701" cy="111" r="5" fill="#ffd700" class="data-point future-point"/>
                    <circle cx="768" cy="93" r="5" fill="#ff8c00" class="data-point future-point"/>
                    <circle cx="835" cy="99" r="5" fill="#ffd700" class="data-point future-point"/>
                    <circle cx="902" cy="117" r="5" fill="#00d9ff" class="data-point future-point"/>
                    <circle cx="967" cy="126" r="5" fill="#00d9ff" class="data-point future-point"/>
                    
                    <!-- Gradient definitions -->
                    <defs>
                        <linearGradient id="gradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#e94560;stop-opacity:0.4" />
                            <stop offset="100%" style="stop-color:#00d9ff;stop-opacity:0.1" />
                        </linearGradient>
                        <linearGradient id="lineGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#4a5568" />
                            <stop offset="46%" style="stop-color:#00d9ff" />
                            <stop offset="50%" style="stop-color:#e94560" />
                            <stop offset="54%" style="stop-color:#00d9ff" />
                            <stop offset="80%" style="stop-color:#ffd700" />
                            <stop offset="100%" style="stop-color:#00d9ff" />
                        </linearGradient>
                    </defs>
                </svg>
                
                <!-- Day labels below the chart -->
                <div class="chart-labels">
                    <div class="day-label past-label">
                        <div class="label-temp">52¬∞F</div>
                        <div class="label-day">Sat<br>Feb 7</div>
                        <div class="label-icon">‚òÅÔ∏è</div>
                    </div>
                    <div class="day-label past-label">
                        <div class="label-temp">48¬∞F</div>
                        <div class="label-day">Sun<br>Feb 8</div>
                        <div class="label-icon">üåßÔ∏è</div>
                    </div>
                    <div class="day-label past-label">
                        <div class="label-temp">45¬∞F</div>
                        <div class="label-day">Mon<br>Feb 9</div>
                        <div class="label-icon">üåßÔ∏è</div>
                    </div>
                    <div class="day-label past-label">
                        <div class="label-temp">43¬∞F</div>
                        <div class="label-day">Tue<br>Feb 10</div>
                        <div class="label-icon">‚òÅÔ∏è</div>
                    </div>
                    <div class="day-label past-label">
                        <div class="label-temp">47¬∞F</div>
                        <div class="label-day">Wed<br>Feb 11</div>
                        <div class="label-icon">‚õÖ</div>
                    </div>
                    <div class="day-label past-label">
                        <div class="label-temp">50¬∞F</div>
                        <div class="label-day">Thu<br>Feb 12</div>
                        <div class="label-icon">‚òÄÔ∏è</div>
                    </div>
                    <div class="day-label past-label">
                        <div class="label-temp">44¬∞F</div>
                        <div class="label-day">Fri<br>Feb 13</div>
                        <div class="label-icon">‚òÅÔ∏è</div>
                    </div>
                    <div class="day-label current-label">
                        <div class="label-temp">46.5¬∞F</div>
                        <div class="label-day"><strong>TODAY</strong><br>Feb 14</div>
                        <div class="label-icon">üåßÔ∏è 99%</div>
                    </div>
                    <div class="day-label future-label">
                        <div class="label-temp">56¬∞F</div>
                        <div class="label-day">Sun<br>Feb 15</div>
                        <div class="label-icon">‚õÖ 5%</div>
                    </div>
                    <div class="day-label future-label">
                        <div class="label-temp">65¬∞F</div>
                        <div class="label-day">Mon<br>Feb 16</div>
                        <div class="label-icon">‚òÄÔ∏è 10%</div>
                    </div>
                    <div class="day-label future-label">
                        <div class="label-temp">63¬∞F</div>
                        <div class="label-day">Tue<br>Feb 17</div>
                        <div class="label-icon">‚òÄÔ∏è 10%</div>
                    </div>
                    <div class="day-label future-label">
                        <div class="label-temp">69¬∞F</div>
                        <div class="label-day">Wed<br>Feb 18</div>
                        <div class="label-icon">‚òÄÔ∏è 0%</div>
                    </div>
                    <div class="day-label future-label">
                        <div class="label-temp">67¬∞F</div>
                        <div class="label-day">Thu<br>Feb 19</div>
                        <div class="label-icon">‚õÖ 15%</div>
                    </div>
                    <div class="day-label future-label">
                        <div class="label-temp">62¬∞F</div>
                        <div class="label-day">Fri<br>Feb 20</div>
                        <div class="label-icon">‚òÅÔ∏è 30%</div>
                    </div>
                    <div class="day-label future-label">
                        <div class="label-temp">58¬∞F</div>
                        <div class="label-day">Sat<br>Feb 21</div>
                        <div class="label-icon">‚õÖ 20%</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Map View Section -->
        <div class="weather-section">
            <div class="section-title">üìç Ladue, MO - Precipitation Map</div>
            <div class="map-container">
                <div id="weatherMap" style="width: 100%; height: 450px; border-radius: 10px;"></div>
                <div style="margin-top: 10px; color: #a8b2d1; font-size: 0.9em;">
                    <strong>Map Legend:</strong> Blue overlay shows precipitation. Click to zoom/pan.
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Initialize map on page load
        window.addEventListener('load', function() {
            setTimeout(initializeMap, 500);
        });

        function initializeMap() {
            try {
                // Create the map
                const weatherMap = L.map('weatherMap').setView([38.6495, -90.3784], 10);
                
                // Add base map layer
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '¬© OpenStreetMap contributors',
                    maxZoom: 19
                }).addTo(weatherMap);
                
                // Add precipitation layer from OpenWeatherMap
                const apiKey = 'f9e35e302c3c0b1f7f3c3e3a3e3b3c3d'; // Demo key
                L.tileLayer(`https://tile.openweathermap.org/map/precipitation_new/{z}/{x}/{y}.png?appid=${apiKey}`, {
                    attribution: 'Weather data ¬© OpenWeatherMap',
                    opacity: 0.6,
                    maxZoom: 19
                }).addTo(weatherMap);
                
                // Add clouds layer
                L.tileLayer(`https://tile.openweathermap.org/map/clouds_new/{z}/{x}/{y}.png?appid=${apiKey}`, {
                    attribution: 'Weather data ¬© OpenWeatherMap',
                    opacity: 0.4,
                    maxZoom: 19
                }).addTo(weatherMap);
                
                // Add marker for Ladue
                L.marker([38.6495, -90.3784])
                    .addTo(weatherMap)
                    .bindPopup('<b>üìç Ladue, MO</b><br>Current: 46.5¬∞F<br>Condition: Rain')
                    .openPopup();
                
                // Force map to resize properly
                setTimeout(() => {
                    weatherMap.invalidateSize();
                }, 100);
                
            } catch (error) {
                console.error('Error initializing map:', error);
                document.getElementById('weatherMap').innerHTML = 
                    '<div style="padding: 50px; text-align: center; color: #a8b2d1;">' +
                    '<p style="font-size: 1.2em; margin-bottom: 10px;">‚ö†Ô∏è Weather Map</p>' +
                    '<p>Interactive weather radar map with precipitation overlay</p>' +
                    '<p style="margin-top: 20px; font-size: 0.9em;">Blue areas show precipitation zones</p>' +
                    '</div>';
            }
        }
    </script>
</body>
</html>
